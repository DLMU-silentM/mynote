# 计算机网络第一章——计算机网络体系结构

## 计算机网络概述

### 概念

一些互联的，自治的计算机系统的结合。

- 广义观点：能实现远程信息处理的系统或能进一步达到资源共享的系统。
- 资源共享观点：
  - 目的：资源共享
  - 组成单元：分布在不同地理位置的多台独立的“自治计算机”
  - 同一规则：网络协议
- 用户透明观点：为用户自动管理资源的网络操作系统，调用用户所需要的资源，整个网络对用户透明A。是一个分布式系统。

### 组成

- 组成上
  - 硬件
    - 主机（端系统）
    - 通信链路：双绞线，光纤
    - 交换设备：路由器，交换机
    - 通信处理设备：网卡
  - 软件
    - 资源共享软件
    - 工具软件
  - 协议
- 工作方式上
  - 边缘部分
    - 网络和链接网络的路由器
  - 核心部分
    - 主机
- 功能性上
  - 通信子网
    - 传输介质
    - 通信设备
    - 网络协议
  - 资源子网
    - 实现资源共享功能的设备及其软件

### 功能
- 数据通信
- 资源共享
- 分布式处理
- 提高可靠性
- 负载均衡

### 分类
- 分布范围
  - 广域网（WAN）
  - 城域网（MAN）
  - 局域网（LAN）
  - 个人局域网（PAN）
- 传输技术
  - 广播式
  - 点对点
- 拓扑结构
  > 网络拓扑结构：由网中节点与通信线路之间的集合关系
  - 总线型
  - 星形网络
    - 有中心设备
  - 环形网络
    - 接口连成环
  - 网状网络
- 使用者
  - 公用网
  - 专用网
- 交换技术
  - 电路交换网络
  - 报文交换网络（存储-转发网络）
  - 分组交换网络（包交换网络）
- 传输介质
  - 有线
  - 无线

### 性能指标

- 带宽
  - 最高数据传输速率
- 时延
  - 发送时延
  - 传播时延
  - 处理时延
  - 排队时延
- 时延带宽积
- 往返时延
  - 从发送端发送数据开始，到发送端收到确认为止，经历的时延
- 吞吐量
  - 单位时间内通过某个网络（或信道，接口）的数据量
- 速率
  - 数据传输速率
- 信道利用率
  - 某一信道有百分之多少的时间是有数据通过的

## 计算机网络体系结构与参考模型

### 计算机网络分层结构

体系结构：计算机网络各层及其协议的集合

体系结构的实现：计算机硬件和软件

分层的基本原则：
- 每层都有一种相对独立的功能，降低大系统的复杂性
- 各层之间界面自然清晰，易于理解，相互交流尽可能少
- 各层功能的精确定义独立于具体的实现方法，可以采用最合适的技术来实现
- 保持下层对上层的独立性，上层单向使用下层提供的服务
- 整个分层结构应能促进标准化工作

第n层的活动元素称为第n层实体。实体指任何可以发送或接收信息的硬件或软件进程，通常是一个特定的软件模块。

不同机器上同一层称为对等层，同一层的实体称为对等实体。

第n层被第n+1层使用：第n层称为服务提供者，第n+1层服务于用户。

协议数据单元（PDU）：
- 服务数据单元（SDU）
- 协议控制单元（PCI）
- 物理层PDU：比特
- 数据链路层PDU：帧
- 网络层PDU：分组
- 传输层PDU：报文段

层次结构含义：
- 第n层实体使用下一层的服务，向上一层提供本层的服务（n层加其下所有层）
- 最底层只提供服务
- 上一层只能通过相邻层间接口使用服务。下一层所提供的服务实现细节对上一层透明。
- 两主机通信时，对等层在逻辑上有一条直接通道。

### 计算机网络协议，接口，服务

#### 协议

网络协议：是控制两个（或多个）对等实体进行通信的规则的集合，是水平的。

协议组成：
- 语法：传输数据的格式
- 语义：所要完成的功能
- 同步：只从各种操作的条件、时序关系等

协议功能：
- 线路管理（建立，释放连接）
- 差错控制
- 数据转换

#### 接口

同一结点内相邻两层之间交换信息的连接点。实体通过服务访问点（SAP）进行交互。第n层SAP是第n+1层可以访问第n层的地方。

#### 服务

下层为紧邻的上层提供的功能调用，是垂直的。

上层使用下层服务时，必须与下层交换一些命令，这些命令在OSI参考模型中被称为服务原语。

服务原语分类：
- 请求
- 指示
- 响应
- 证实

有应答服务包含全部四种原语；无应答服务只有请求和指示两类原语。

并非在一层内完成的全部功能都称为服务，只有能被高一层实体看见的功能才称为服务。

服务分类：
- 面向连接服务与无连接服务
  - 面向连接服务（如TCP）：先建立连接，分配响应的资源（如缓冲区）。连接建立-> 数据传输-> 连接释放。
  - 无连接服务（“尽最大努力交付”，如IP，UDP）：把每个带有目的地址的包（报文分组）传送到线路上。
- 可靠服务与不可靠服务
  - 可靠服务：网络具有纠错、检错、应答机制
  - 不可靠服务：网络只是尽量正确可靠地传送
- 有应答服务和无应答服务
  - 有应答服务：接收方在收到数据后向发送方给出相应的应答，应答由传输系统内部自动实现
  - 无应答服务：接收方收到数据后不自动给出应答，如需要，由高层实现

### ISO/OSI参考模型和TCP/IP模型

#### OSI

![20220303215121-2022-03-03-21-51-22](http://lengyuewusheng-blog.oss-cn-beijing.aliyuncs.com/blog/20220303215121-2022-03-03-21-51-22.png)

物理层：
- 传输单位：比特
- 任务：透明的传输比特流
- 功能：在物理媒体上为数据端设备透明循传输原始比特流
- 协议：也称物理层接口标准，如EIA-232C，EIA/TIA RS-449，CCITT的X2.1

- 物理层在通信链路中的作用：
  - 电路接口参数
  - 传输的信号的意义和电气特性

数据链路层
- 传输单位：帧
- 任务：将网络层传来的IP数据报组装成帧
- 功能：成帧，差错控制，流量控制，传输管理
- 特殊子层——介质访问子层：处理如何控制广播式网络中控制对共享信道的访问
- 协议：SDLC，HDLC，PPP，STP，帧中继

网络层
- 传输单位：数据报
- 任务：把网络层的协议数据单元（分组）层源端传到目的端，为分组交换网上的不同主机提供通信服务
- 功能：对分组进行路由选择，实现流量控制，拥塞控制，差错控制和网际互连
- 协议：IP，IPX，ICMP，IGMP，ARP，RARP，OSPF

传输层
- 传输单位：报文段（TCP）或用户数据报（UDP）
- 任务：主机中两个进程之间的通信
- 功能：为端到端连接提供可靠的传输服务，为端到端连接提供流量控制、擦戳控制、服务质量、数据传输管理等服务

> 数据链路层：点到点，是两个主机之间的通信
> 传输层：端到端，是两个主机的进程之间的通信

- 协议：TCP，UDP

会话层
- 会话层允许不同主机上的各个进程之间进行会话。会话层利用传输层提供的端到端的服务，向表示层提供它的增值服务。这种服务主要为表示层实体或用户进程建立连接并在连接上有序地传输数据，这就是会话，也称建立同步（SYN）。
- 功能：负责主机间的绘画进程，包括建立、管理及终止进程之间的会话。可以使用校验点使通信会话在通信失效时从校验点继续恢复通信，实现数据同步

表示层
- 处理两个通信系统中交换信息的表示方式

应用层
- 用户与网络的界面
- 协议：用于文件传输的FTP，用于电子邮件的SMTP，用于万维网的HTTP

#### TCP/IP

![20220303224246-2022-03-03-22-42-47](http://lengyuewusheng-blog.oss-cn-beijing.aliyuncs.com/blog/20220303224246-2022-03-03-22-42-47.png)

网络接口层
- 物理层+数据链路层
- 主机必须使用某种协议与网络连接，以便在其上传递IP分组

网际层
- 网络层
- 分组发往任何网络，并为之独立地选择合适的路由，但它不保证各个分组有序地到达，各个分组的有序交付由高层负责
- 标准的分组格式和协议：IP

传输层
- 传输层
- 协议：
  - 传输控制协议（Transmission Control Protocol，TCP）：它是面向连接的，数据传输的单位是报文段，能够提供可靠的交付。
  - 用户数据报协议（User Datagram Protocol，UDP）：它是无连接的，数据传输的单位是用户数据报，不保证提供可靠的交付，只能提供“尽最大努力交付”。

应用层
- 包含所有高层协议
- 虚拟终端协议（Telnet）
- 文件传输协议（FTP）
- 域名解析服务（DNS）
- 电子邮件协议（SMTP）
- 超文本传输协议（HTTP）

#### 比较

![20220303225030-2022-03-03-22-50-31](http://lengyuewusheng-blog.oss-cn-beijing.aliyuncs.com/blog/20220303225030-2022-03-03-22-50-31.png)

相同
- 采取分层的体系结构
- 基于独立的协议栈的概念
- 可以解决异构网络的互联

不同
- OSI参考模型精确地定义了三个主要概念：服务、协议和接口
- OSI通用性良好；TCP/IP是对已有协议的描述，因此不会出现协议不能匹配模型的情况
- TCP/IP在设计之初就考虑到了多种异构网的互联问题，并将网际协议（IP）作为一个单独的重要层次。OSI在网络层中划分出一个子层来完成类似于TCP/IP模型中的IP的功能
- OSI在网络层支持无连接和面向连接的通信，但在传输层仅有面向连接的通信。而TCP/IP在网际层仅有一种无连接的通信模式，传输层支持无连接和面向连接两种模式
  
#### 5层体系结构
- 应用层
- 传输层
- 网络层
- 数据链路层
- 物理层