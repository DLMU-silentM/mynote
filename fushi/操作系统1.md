# 操作系统第一章
[TOC]
## 基础-操作系统特征

并发性和共享性是基础，互为存在条件。

### 并发性

- 并发性：同一时间间隔内 **（是操作系统特征）**
- 并行性：同一时刻发生 **（不是操作系统特征）** 
  
  ![20220224154915-2022-02-24-15-49-16](http://lengyuewusheng-blog.oss-cn-beijing.aliyuncs.com/blog/20220224154915-2022-02-24-15-49-16.png)

### 共享性

系统中有限的资源不再为某个用户独占，而是可供多个用中共享。

共享的方式：

- 互用共享：一段时间内某一资源只允许一个用户使用，当使用完后，其他用户才能使用。**例如：打印机。**
- 非互斥共享：一个资源在一段时间内可以供多个用户“同时”使用。依旧是：宏观上的并行，微观上的串行。**例如CPU，内存等。**

### 虚拟性

一个物理实体映射为若干个逻辑实体。多个用户可以同时使用。

使用了虚拟存储技术中的空分复用技术（内存运行大于需求总和大于内存的软件）和时分复用技术（单核CPU可以打开多个软件）。

虚拟性是基于并发性的，如果没有并发性，也就失去虚拟性的意义了。

### 不确定性（异步性）

多道程序在并发执行环境下，开始时间、执行顺序、执行时间是不同的。

---
## 基础-操作系统历史

1. 人工操作
2. 脱机输入/输出技术
3. 批处理系统
4. 多道程序处理技术

*是操作系统形成的标志*

---
## 操作系统分类

### 分时系统

把CPU进行时间上的分割，每个时间段称为一个时间片。在硬件上设置中断机构和时钟。

特征：

- 同时性：多个用户连接到一台主机上，宏观上多个用户同时工作；微观上各个终端作业轮流运行一个时间片
- 独立性：每个用户各自占用一个终端
- 及时性：终端用户的请求在很短时间内得到响应
- 交互性：与系统进行人机对话

### 实时操作系统

在限定时间内对输入进行快速处理并响应的计算机处理系统，用于过程控制，事务处理。

- 实时性
- 可靠性

|     分类     |           实时系统           |         分时系统         |
| :----------: | :--------------------------: | :----------------------: |
|   设计目的   |           专用系统           |         通用系统         |
|  交互性强弱  |           交互性弱           |         交互性强         |
| 响应时间长短 | 以信息处理能接受的延迟为标准 | 以人接受的等待时间为标准 |

---
## 操作系统结构

### 用户观点

操作系统是用户和计算机的接口

- 作业级接口：命令方式和图形界面
- 程序级接口：一组系统调用命令，用于程序设计中

### 层次结构观点
OSI模型：
- 应用层
- 表示层
- 会话层
- 传输层
- 网络层
- 数据链路层
- 物理层

THE系统：
- 5层：操作员
- 4层：用户程序
- 3层：输入/输出系统
- 2层：操作员-进程通信
- 1层：内存和磁鼓管理
- 0层：处理器分配和多到程序

### 资源管理
- 作业管理
- 处理机管理（进程管理）
- 存储管理
- 设备管理
- 文件系统管理

### 功能观点：模块接口法

将整个系统分为各个模块，预先定义接口，可以通信和调用。

### 虚拟机

### 客户机/服务器模式

将操作系统看作客户机/服务器模式，进行请求/服务

---
## 内核体系结构模型

- 两种指令
  - 特权指令：比较危险，普通程序不能使用
  - 非特权指令：基本指令
- 两种处理器状态：
  - 核心态（管态）
  - 用户态（目态）
  - CPU状态存放在PSW寄存器中
- 两种程序
  - 内核程序：系统资源的管理者，可以执行特权和非特权，运行在核心态
  - 应用程序：只能使用非特权指令，运行在用户态

### 微内核

基本思想：内核保持尽量小，只实现操作系统的基本功能；将更多操作系统功能放在核心之外，作为独立的服务进程运行。

- 好处：
  - 扩展性，
  - 可靠性，
  - 便于网络服务，实现分布式处理
- 坏处：
  - 消息传递比直接调用低
  - 用户态与核心态频繁切换，效率低

### 单内核

基本思想：将核心分为若干个模块，模块间的通信通过调用其它模块中的函数实现（直接调用）。|

- 优点：效率高
- 缺点：内核移植困难

### 混合结构

大多数采用混合结构。

总体上是微内核，但是在设计上引入了单内核的设计。