# 操作系统第二章-作业管理和用户接口

[TOC]

## 作业

作业是用户在一次算题或事务处理中要求计算机系统所作的工作的总和。是用户向计算机系统提交一项工作的基本单位，由一个或若干个程序组成。由多个作业步组成。

分类：

- 脱机作业：作业执行过程中用户不直接与计算机交互、
- 联机作业：采用人机对话方式控制作业运行

组成：

- 数据
- 程序
- 作业控制信息
  - 作业基本情况
  - 作业控制描述
  - 作业资源要求描述

处理过程：

**JOB**-作业输入->**输入**-作业注册->**后备**-作业调度->**执行**-作业终止->**完成**

### 输入输出：
- 脱机输入输出
- 联机输入输出：CPU与输入输出设备由速度差，全部由CPU控制会带来消耗
- SPOOLing技术（假脱机系统）：
  输入输出设备是慢速独享设备。使用一台可以共享、高速大容量的设备（磁盘）来模拟独占设备，使一台独占设备变成多台可并行的虚拟设备。
  
  输入井和输出井是在磁盘上开辟的两个大容量存储空间。用来调节CPU与输入输出设备的不协调性。输入缓冲区和输出缓冲区是在内存中开辟的两个缓冲区。
  ![20220224200610-2022-02-24-20-06-11](http://lengyuewusheng-blog.oss-cn-beijing.aliyuncs.com/blog/20220224200610-2022-02-24-20-06-11.png)

  技术基础：
  - 多道程序设计技术
  - 通道技术

### 注册：
作业控制块JCB，将作业排入到后备队列中。

### 调度：
- 磁盘到内存：高级调度
- 内存到磁盘：中级调度（交换调度）
- 内存到CPU：低级调度

#### 单道批处理系统作业调度
一次只能将一个作业调入内存运行。

调度算法：
- 先来先服务（FCFS）（First Come First Service）
  - 优点：简单
  - 缺点：周转时间长，吞吐量小，不利于对短作业的执行
- 最短作业优先（SJF）（Shortest Job First）
  - 优点：降低作业平均周转时间
  - 缺点：对长作业不利，出现饥饿现象
- 最高相应比有限调度算法（HRP）（Highest Ratio Priority）
  
  RP= 作业响应时间/作业运行时间
    = （作业等待时间+作业运行时间）/作业运行时间
    = 1+（作业等待时间/作业运行时间）
  - 优点：短作业和长作业都照顾到，避免饥饿现象。
  - 缺点：计算略复杂

#### 多道批处理系统作业调度
一次可以选择多个作业同时执行（并发），多个不同的队可以按不同需求进行分队。

### 作业调度算法性能分析
- CPU利用率：尽量让外设和CPU同时工作
- 吞吐量：单位时间内CPU完成作业的数量。短作业有利于吞吐量
- 周转时间：批处理系统的性能指标

---
## 接口
- 用户接口：作业控制级接口（命令方式和图形界面）
- 程序级接口：访管指令（目态指令，非特权指令）：需要操作系统服务要求时，引起访管中断，使程序“自愿进管”，也称陷阱指令。
  |   两种调用   |                                 系统功能调用                                 |           普通过程调用           |
  | :----------: | :--------------------------------------------------------------------------: | :------------------------------: |
  | 运行状态不同 |                     调用过程和被调用过程运行在不同的状态                     |         运行在相同的状态         |
  | 调用方法不同 |       必须通过中断机制首先进入系统核心，然后才能转向相应的命令处理程序       | 可以直接由调用过程转向被调用过程 |
  |   返回问题   | 由于发生和状态的改变，在返回时可能需要重新进行调度分析（如抢先式调度的系统） |     直接返回调用过程继续执行     |